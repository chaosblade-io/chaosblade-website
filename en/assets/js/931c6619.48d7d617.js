"use strict";(self.webpackChunkchaosblade=self.webpackChunkchaosblade||[]).push([[59917],{15680:(e,n,a)=>{a.d(n,{xA:()=>c,yg:()=>g});var t=a(96540);function l(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function o(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function r(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?o(Object(a),!0).forEach((function(n){l(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function s(e,n){if(null==e)return{};var a,t,l=function(e,n){if(null==e)return{};var a,t,l={},o=Object.keys(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||(l[a]=e[a]);return l}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var i=t.createContext({}),d=function(e){var n=t.useContext(i),a=n;return e&&(a="function"==typeof e?e(n):r(r({},n),e)),a},c=function(e){var n=d(e.components);return t.createElement(i.Provider,{value:n},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},h=t.forwardRef((function(e,n){var a=e.components,l=e.mdxType,o=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=d(a),h=l,g=p["".concat(i,".").concat(h)]||p[h]||u[h]||o;return a?t.createElement(g,r(r({ref:n},c),{},{components:a})):t.createElement(g,r({ref:n},c))}));function g(e,n){var a=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var o=a.length,r=new Array(o);r[0]=h;var s={};for(var i in n)hasOwnProperty.call(n,i)&&(s[i]=n[i]);s.originalType=e,s[p]="string"==typeof e?e:l,r[1]=s;for(var d=2;d<o;d++)r[d]=a[d];return t.createElement.apply(null,r)}return t.createElement.apply(null,a)}h.displayName="MDXCreateElement"},61684:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>i,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var t=a(58168),l=(a(96540),a(15680));const o={title:"Platform Box Install And Uninstall"},r=void 0,s={unversionedId:"getting-started/installation-and-deployment/platform-box-install-and-uninstall",id:"version-1.7.0/getting-started/installation-and-deployment/platform-box-install-and-uninstall",title:"Platform Box Install And Uninstall",description:"This document describes how to install the Chaos Engineering Platform\uff1aChaosBlade-Box.",source:"@site/versioned_docs/version-1.7.0/getting-started/installation-and-deployment/platform-box-install-and-uninstall.md",sourceDirName:"getting-started/installation-and-deployment",slug:"/getting-started/installation-and-deployment/platform-box-install-and-uninstall",permalink:"/en/docs/1.7.0/getting-started/installation-and-deployment/platform-box-install-and-uninstall",draft:!1,editUrl:"https://github.com/chaosblade-io/chaosblade-website/edit/master/versioned_docs/version-1.7.0/getting-started/installation-and-deployment/platform-box-install-and-uninstall.md",tags:[],version:"1.7.0",frontMatter:{title:"Platform Box Install And Uninstall"},sidebar:"version-1.7.0/docs",previous:{title:"blade version",permalink:"/en/docs/1.7.0/getting-started/chaosblade-tool-quick-start/cli-mode-user-guaid/blade-version"},next:{title:"Tool ChaosBlade Install And Uninstall",permalink:"/en/docs/1.7.0/getting-started/installation-and-deployment/tool-chaosblade-install-and-uninstall"}},i={},d=[{value:"Install on a host",id:"install-on-a-host",level:2},{value:"Environment Preparation",id:"environment-preparation",level:3},{value:"First, ensure that the environment is installed Java",id:"first-ensure-that-the-environment-is-installed-java",level:4},{value:"Second, ensure that the environment can automatically install the probe\uff1a",id:"second-ensure-that-the-environment-can-automatically-install-the-probe",level:4},{value:"Running the Application",id:"running-the-application",level:3},{value:"Verify installation",id:"verify-installation",level:3},{value:"Uninstall ChaosBlade-Box",id:"uninstall-chaosblade-box",level:3},{value:"Installation in  Kubernetes Environment",id:"installation-in--kubernetes-environment",level:2},{value:"Environment Preparation",id:"environment-preparation-1",level:3},{value:"Install with Helm",id:"install-with-helm",level:3},{value:"First, download the Box Chart package",id:"first-download-the-box-chart-package",level:4},{value:"Second , installation",id:"second--installation",level:4},{value:"Verify installation",id:"verify-installation-1",level:3}],c={toc:d},p="wrapper";function u(e){let{components:n,...a}=e;return(0,l.yg)(p,(0,t.A)({},c,a,{components:n,mdxType:"MDXLayout"}),(0,l.yg)("p",null,"This document describes how to install the Chaos Engineering Platform\uff1aChaosBlade-Box."),(0,l.yg)("h2",{id:"install-on-a-host"},"Install on a host"),(0,l.yg)("h3",{id:"environment-preparation"},"Environment Preparation"),(0,l.yg)("h4",{id:"first-ensure-that-the-environment-is-installed-java"},"First, ensure that the environment is installed ",(0,l.yg)("a",{parentName:"h4",href:"https://www.oracle.com/java/technologies/downloads/"},"Java")),(0,l.yg)("p",null,"To see if the Helm is installed, run the following command:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-shell"},"java -verison\n")),(0,l.yg)("p",null,"Here is the expected output:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-shell"},'java version "1.8.0_151"\nJava(TM) SE Runtime Environment (build 1.8.0_151-b12)\nJava HotSpot(TM) 64-Bit Server VM (build 25.151-b12, mixed mode)\n')),(0,l.yg)("h4",{id:"second-ensure-that-the-environment-can-automatically-install-the-probe"},"Second, ensure that the environment can automatically install the probe\uff1a"),(0,l.yg)("p",null,"The following environmental safeguards\uff0c",(0,l.yg)("strong",{parentName:"p"},"This function is mainly used when the probe is automatically installed on the platform. If this function is not required, you do not need to install it")),(0,l.yg)("ol",null,(0,l.yg)("li",{parentName:"ol"},"Make sure the environment is installed ",(0,l.yg)("inlineCode",{parentName:"li"},"ansible"))),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-shell"},"# Check if there is already installed\nansible --version\n\n# install ansible, eg: Fedora || RedHat \nyum install ansible -y\n")),(0,l.yg)("ol",{start:2},(0,l.yg)("li",{parentName:"ol"},"Make sure the environment is installed ",(0,l.yg)("inlineCode",{parentName:"li"},"expect"),"\uff0clet ",(0,l.yg)("a",{parentName:"li",href:"https://github.com/chaosblade-io/chaosblade-box/blob/main/ssh/sshKey.sh"},"sshKey.sh")," and chaosblade-box-version.jar in the same directory")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-shell"},"# Check if there is already installed\nexpect -v\n\n# install expect, eg: Fedora || RedHat \nyum install expect -y\n")),(0,l.yg)("ol",{start:3},(0,l.yg)("li",{parentName:"ol"},"generate public key")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-shell"},"# Check if there is already a key, if there is, delete the previous backup\nls ~/.ssh\nrm -rf ~/.ssh/*\n\n# generate public key\nssh-keygen -t rsa\n")),(0,l.yg)("h3",{id:"running-the-application"},"Running the Application"),(0,l.yg)("p",null,"If it's already installed ",(0,l.yg)("inlineCode",{parentName:"p"},"MYSQL"),"\uff0cYou need to create ",(0,l.yg)("inlineCode",{parentName:"p"},"chaosblade"),"s database\uff0cIf not installed, you can pass ",(0,l.yg)("inlineCode",{parentName:"p"},"Docker")," install and run"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-shell"},"docker run -d -it -p 3306:3306 \\\n            -e MYSQL_DATABASE=chaosblade \\\n            -e MYSQL_ROOT_PASSWORD=DATASOURCE_PASSWORD \\\n            --name mysql-5.6 mysql:5.6 \\\n            --character-set-server=utf8mb4 \\\n            --collation-server=utf8mb4_unicode_ci \\\n            --default-time_zone='+8:00' \\\n            --lower_case_table_names=1\n")),(0,l.yg)("blockquote",null,(0,l.yg)("p",{parentName:"blockquote"},"Notes:  You need to replace ",(0,l.yg)("strong",{parentName:"p"},"DATASOURCE_PASSWORD")," with a custom password")),(0,l.yg)("p",null,"You can run the following command to start the Box"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-shell"},'nohup java -Duser.timezone=Asia/Shanghai -jar chaosblade-box-1.0.0.jar --spring.datasource.url="jdbc:mysql://DATASOURCE_HOST:3306/chaosblade?characterEncoding=utf8&useSSL=false" --spring.datasource.username=DATASOURCE_USERNAME --spring.datasource.password=DATASOURCE_PASSWORD --chaos.server.domain=BOX-HOST> chaosblade-box.log 2>&1 &\n')),(0,l.yg)("blockquote",null,(0,l.yg)("p",{parentName:"blockquote"},"Notes: Need to replace parameter DATASOURCE_HOST\u3001DATASOURCE_USERNAME\u3001DATASOURCE_PASSWORD")),(0,l.yg)("h3",{id:"verify-installation"},"Verify installation"),(0,l.yg)("p",null,"You can check whether the process exists and pass the command ",(0,l.yg)("a",{parentName:"p",href:"http://127.0.0.1:7001/"},"http://127.0.0.1:7001")," Go to the platform"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-shell"},"ps -ef | grep chaosblade-box\n")),(0,l.yg)("h3",{id:"uninstall-chaosblade-box"},"Uninstall ChaosBlade-Box"),(0,l.yg)("p",null,"If you need to uninstall ",(0,l.yg)("strong",{parentName:"p"},"ChaosBlade-Box")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-shell"},"# 1. Check the box process pid first\nps -ef | grep chaosblade-box\n\n# 2. Directly kill the corresponding process\nkill process-pid\n")),(0,l.yg)("h2",{id:"installation-in--kubernetes-environment"},"Installation in  Kubernetes Environment"),(0,l.yg)("h3",{id:"environment-preparation-1"},"Environment Preparation"),(0,l.yg)("p",null,"For details, see\uff1a","[Prepare the installation Kubernetes environment]","(/en/docs/1.7.0/getting-started/installation-and-deployment/environment-prepare/#Prepare the installation Kubernetes environment)"),(0,l.yg)("h3",{id:"install-with-helm"},"Install with Helm"),(0,l.yg)("h4",{id:"first-download-the-box-chart-package"},"First, download the Box Chart package"),(0,l.yg)("p",null,"See all available for download  ",(0,l.yg)("a",{parentName:"p",href:"https://github.com/chaosblade-io/chaosblade-box/releases"},"box-release"),"\uff0cDownload to local, such as:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-shell"},"wget https://github.com/chaosblade-io/chaosblade-box/releases/download/v1.0.2/chaosblade-box-1.0.2.tgz\n")),(0,l.yg)("h4",{id:"second--installation"},"Second , installation"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-shell"},"helm install chaosblade-box chaosblade-box-1.0.0.tgz --namespace chaosblade --set spring.datasource.password=DATASOURCE_PASSWORD\n")),(0,l.yg)("h3",{id:"verify-installation-1"},"Verify installation"),(0,l.yg)("p",null,"To see how the Box is running, run the following command\uff1a"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-shell"},"kubectl get po -n chaosblade\n")),(0,l.yg)("p",null,"Here is the expected output:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-shell"},"NAME                                    READY   STATUS    RESTARTS   AGE\nchaosblade-box-5bc47b676f-2gjh9         1/1     Running   0          15d\nchaosblade-box-mysql-58cc864896-2jxrs   1/1     Running   0          15d\n")),(0,l.yg)("p",null,"If your actual output matches the expected output, ChaosBlade-Box has been installed successfully."),(0,l.yg)("blockquote",null,(0,l.yg)("p",{parentName:"blockquote"},"\u26a0\ufe0fAttention\nIf the actual output ",(0,l.yg)("strong",{parentName:"p"},"STATUS")," is not Running, you need to run the following command to view Pod details, and then troubleshoot the problem according to the error message."),(0,l.yg)("pre",{parentName:"blockquote"},(0,l.yg)("code",{parentName:"pre",className:"language-shell"},"# As chaosblade-box example\nkubectl describe po chaosblade-box-5bc47b676f-2gjh9 -n chaosblade\n")),(0,l.yg)("h3",{parentName:"blockquote",id:"uninstall-chaosblade-box-1"},"Uninstall ChaosBlade-Box"),(0,l.yg)("p",{parentName:"blockquote"},"To uninstall ChaosBladder-box, run the following command:"),(0,l.yg)("pre",{parentName:"blockquote"},(0,l.yg)("code",{parentName:"pre",className:"language-shell"},"helm un chaosblade-box -n chaosblade\n"))))}u.isMDXComponent=!0}}]);