"use strict";(self.webpackChunkchaosblade=self.webpackChunkchaosblade||[]).push([[1876],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return h}});var a=n(67294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,o=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=d(n),h=l,m=u["".concat(s,".").concat(h)]||u[h]||p[h]||o;return n?a.createElement(m,r(r({ref:t},c),{},{components:n})):a.createElement(m,r({ref:t},c))}));function h(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var o=n.length,r=new Array(o);r[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:l,r[1]=i;for(var d=2;d<o;d++)r[d]=n[d];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},38150:function(e,t,n){n.r(t),n.d(t,{assets:function(){return s},contentTitle:function(){return r},default:function(){return p},frontMatter:function(){return o},metadata:function(){return i},toc:function(){return d}});var a=n(87462),l=(n(67294),n(3905));const o={title:"Platform Box Install And Uninstall"},r=void 0,i={unversionedId:"getting-started/installation-and-deployment/platform-box-install-and-uninstall",id:"version-1.7.0/getting-started/installation-and-deployment/platform-box-install-and-uninstall",title:"Platform Box Install And Uninstall",description:"This document describes how to install the Chaos Engineering Platform\uff1aChaosBlade-Box.",source:"@site/versioned_docs/version-1.7.0/getting-started/installation-and-deployment/platform-box-install-and-uninstall.md",sourceDirName:"getting-started/installation-and-deployment",slug:"/getting-started/installation-and-deployment/platform-box-install-and-uninstall",permalink:"/en/docs/1.7.0/getting-started/installation-and-deployment/platform-box-install-and-uninstall",draft:!1,editUrl:"https://github.com/chaosblade-io/chaosblade-website/edit/master/versioned_docs/version-1.7.0/getting-started/installation-and-deployment/platform-box-install-and-uninstall.md",tags:[],version:"1.7.0",frontMatter:{title:"Platform Box Install And Uninstall"},sidebar:"version-1.7.0/docs",previous:{title:"blade version",permalink:"/en/docs/1.7.0/getting-started/chaosblade-tool-quick-start/cli-mode-user-guaid/blade-version"},next:{title:"Tool ChaosBlade Install And Uninstall",permalink:"/en/docs/1.7.0/getting-started/installation-and-deployment/tool-chaosblade-install-and-uninstall"}},s={},d=[{value:"Install on a host",id:"install-on-a-host",level:2},{value:"Environment Preparation",id:"environment-preparation",level:3},{value:"First, ensure that the environment is installed Java",id:"first-ensure-that-the-environment-is-installed-java",level:4},{value:"Second, ensure that the environment can automatically install the probe\uff1a",id:"second-ensure-that-the-environment-can-automatically-install-the-probe",level:4},{value:"Running the Application",id:"running-the-application",level:3},{value:"Verify installation",id:"verify-installation",level:3},{value:"Uninstall ChaosBlade-Box",id:"uninstall-chaosblade-box",level:3},{value:"Installation in  Kubernetes Environment",id:"installation-in--kubernetes-environment",level:2},{value:"Environment Preparation",id:"environment-preparation-1",level:3},{value:"Install with Helm",id:"install-with-helm",level:3},{value:"First, download the Box Chart package",id:"first-download-the-box-chart-package",level:4},{value:"Second , installation",id:"second--installation",level:4},{value:"Verify installation",id:"verify-installation-1",level:3}],c={toc:d};function p(e){let{components:t,...n}=e;return(0,l.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"This document describes how to install the Chaos Engineering Platform\uff1aChaosBlade-Box."),(0,l.kt)("h2",{id:"install-on-a-host"},"Install on a host"),(0,l.kt)("h3",{id:"environment-preparation"},"Environment Preparation"),(0,l.kt)("h4",{id:"first-ensure-that-the-environment-is-installed-java"},"First, ensure that the environment is installed ",(0,l.kt)("a",{parentName:"h4",href:"https://www.oracle.com/java/technologies/downloads/"},"Java")),(0,l.kt)("p",null,"To see if the Helm is installed, run the following command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"java -verison\n")),(0,l.kt)("p",null,"Here is the expected output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},'java version "1.8.0_151"\nJava(TM) SE Runtime Environment (build 1.8.0_151-b12)\nJava HotSpot(TM) 64-Bit Server VM (build 25.151-b12, mixed mode)\n')),(0,l.kt)("h4",{id:"second-ensure-that-the-environment-can-automatically-install-the-probe"},"Second, ensure that the environment can automatically install the probe\uff1a"),(0,l.kt)("p",null,"The following environmental safeguards\uff0c",(0,l.kt)("strong",{parentName:"p"},"This function is mainly used when the probe is automatically installed on the platform. If this function is not required, you do not need to install it")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Make sure the environment is installed ",(0,l.kt)("inlineCode",{parentName:"li"},"ansible"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"# Check if there is already installed\nansible --version\n\n# install ansible, eg: Fedora || RedHat \nyum install ansible -y\n")),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},"Make sure the environment is installed ",(0,l.kt)("inlineCode",{parentName:"li"},"expect"),"\uff0clet ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/chaosblade-io/chaosblade-box/blob/main/ssh/sshKey.sh"},"sshKey.sh")," and chaosblade-box-version.jar in the same directory")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"# Check if there is already installed\nexpect -v\n\n# install expect, eg: Fedora || RedHat \nyum install expect -y\n")),(0,l.kt)("ol",{start:3},(0,l.kt)("li",{parentName:"ol"},"generate public key")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"# Check if there is already a key, if there is, delete the previous backup\nls ~/.ssh\nrm -rf ~/.ssh/*\n\n# generate public key\nssh-keygen -t rsa\n")),(0,l.kt)("h3",{id:"running-the-application"},"Running the Application"),(0,l.kt)("p",null,"If it's already installed ",(0,l.kt)("inlineCode",{parentName:"p"},"MYSQL"),"\uff0cYou need to create ",(0,l.kt)("inlineCode",{parentName:"p"},"chaosblade"),"s database\uff0cIf not installed, you can pass ",(0,l.kt)("inlineCode",{parentName:"p"},"Docker")," install and run"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"docker run -d -it -p 3306:3306 \\\n            -e MYSQL_DATABASE=chaosblade \\\n            -e MYSQL_ROOT_PASSWORD=DATASOURCE_PASSWORD \\\n            --name mysql-5.6 mysql:5.6 \\\n            --character-set-server=utf8mb4 \\\n            --collation-server=utf8mb4_unicode_ci \\\n            --default-time_zone='+8:00' \\\n            --lower_case_table_names=1\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Notes:  You need to replace ",(0,l.kt)("strong",{parentName:"p"},"DATASOURCE_PASSWORD")," with a custom password")),(0,l.kt)("p",null,"You can run the following command to start the Box"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},'nohup java -Duser.timezone=Asia/Shanghai -jar chaosblade-box-1.0.0.jar --spring.datasource.url="jdbc:mysql://DATASOURCE_HOST:3306/chaosblade?characterEncoding=utf8&useSSL=false" --spring.datasource.username=DATASOURCE_USERNAME --spring.datasource.password=DATASOURCE_PASSWORD --chaos.server.domain=BOX-HOST> chaosblade-box.log 2>&1 &\n')),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Notes: Need to replace parameter DATASOURCE_HOST\u3001DATASOURCE_USERNAME\u3001DATASOURCE_PASSWORD")),(0,l.kt)("h3",{id:"verify-installation"},"Verify installation"),(0,l.kt)("p",null,"You can check whether the process exists and pass the command ",(0,l.kt)("a",{parentName:"p",href:"http://127.0.0.1:7001/"},"http://127.0.0.1:7001")," Go to the platform"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"ps -ef | grep chaosblade-box\n")),(0,l.kt)("h3",{id:"uninstall-chaosblade-box"},"Uninstall ChaosBlade-Box"),(0,l.kt)("p",null,"If you need to uninstall ",(0,l.kt)("strong",{parentName:"p"},"ChaosBlade-Box")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"# 1. Check the box process pid first\nps -ef | grep chaosblade-box\n\n# 2. Directly kill the corresponding process\nkill process-pid\n")),(0,l.kt)("h2",{id:"installation-in--kubernetes-environment"},"Installation in  Kubernetes Environment"),(0,l.kt)("h3",{id:"environment-preparation-1"},"Environment Preparation"),(0,l.kt)("p",null,"For details, see\uff1a","[Prepare the installation Kubernetes environment]","(/en/docs/1.7.0/getting-started/installation-and-deployment/environment-prepare/#Prepare the installation Kubernetes environment)"),(0,l.kt)("h3",{id:"install-with-helm"},"Install with Helm"),(0,l.kt)("h4",{id:"first-download-the-box-chart-package"},"First, download the Box Chart package"),(0,l.kt)("p",null,"See all available for download  ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/chaosblade-io/chaosblade-box/releases"},"box-release"),"\uff0cDownload to local, such as:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"wget https://github.com/chaosblade-io/chaosblade-box/releases/download/v1.0.2/chaosblade-box-1.0.2.tgz\n")),(0,l.kt)("h4",{id:"second--installation"},"Second , installation"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"helm install chaosblade-box chaosblade-box-1.0.0.tgz --namespace chaosblade --set spring.datasource.password=DATASOURCE_PASSWORD\n")),(0,l.kt)("h3",{id:"verify-installation-1"},"Verify installation"),(0,l.kt)("p",null,"To see how the Box is running, run the following command\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl get po -n chaosblade\n")),(0,l.kt)("p",null,"Here is the expected output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"NAME                                    READY   STATUS    RESTARTS   AGE\nchaosblade-box-5bc47b676f-2gjh9         1/1     Running   0          15d\nchaosblade-box-mysql-58cc864896-2jxrs   1/1     Running   0          15d\n")),(0,l.kt)("p",null,"If your actual output matches the expected output, ChaosBlade-Box has been installed successfully."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u26a0\ufe0fAttention\nIf the actual output ",(0,l.kt)("strong",{parentName:"p"},"STATUS")," is not Running, you need to run the following command to view Pod details, and then troubleshoot the problem according to the error message."),(0,l.kt)("pre",{parentName:"blockquote"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"# As chaosblade-box example\nkubectl describe po chaosblade-box-5bc47b676f-2gjh9 -n chaosblade\n")),(0,l.kt)("h3",{parentName:"blockquote",id:"uninstall-chaosblade-box-1"},"Uninstall ChaosBlade-Box"),(0,l.kt)("p",{parentName:"blockquote"},"To uninstall ChaosBladder-box, run the following command:"),(0,l.kt)("pre",{parentName:"blockquote"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"helm un chaosblade-box -n chaosblade\n"))))}p.isMDXComponent=!0}}]);